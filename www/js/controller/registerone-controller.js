angular.module("myapp").controller("RegisteroneController",function(){}).directive("registeroneDir",function(){return{link:function(){function e(e){var t=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return t.test(e)}$(".english_only").keyup(function(){english_only($(this))});var t,a=new Object;if(null!==localStorage.getItem("user_info_temp")){var a=JSON.parse(localStorage.getItem("user_info_temp"));console.log(a),$("#regform_one #email").val(a.email),$("#regform_one #passwd").val(a.passwd),$("#regform_one #repasswd").val(a.passwd),$("#regform_one #mobile").attr("type","text").val(a.mobile).attr("type","number")}$(function(){$("#regform_one").on("submit",function(){email=$(this).find("#email").val().trim().replace(/(<([^>]+)>)/gi,""),mobile=$(this).find("#mobile").val().trim().replace(/(<([^>]+)>)/gi,""),passwd=$(this).find("#passwd").val().trim().replace(/(<([^>]+)>)/gi,""),repasswd=$(this).find("#repasswd").val().trim().replace(/(<([^>]+)>)/gi,""),clearTimeout(t);var s=new Array;return $("#regform_one .req").each(function(e,t){(""==$(this).val()||void 0===$(this).val())&&s.push($(this).attr("placeholder"))}),s.length>0?($("body .alert .msg").text("فیلد های  "+s.join()+"خالی است ").parent(".alert").removeClass("none"),t=setTimeout(function(){$("body .alert").addClass("none")},5e3),!1):(console.log(e(email)),e(email)?11!=mobile.length?($("body .alert .msg").text("شماره موبایل باید 11 رقم باشد").parent(".alert").removeClass("none"),t=setTimeout(function(){$("body .alert").addClass("none")},5e3),!1):passwd.length<4||passwd.length>40?($("body .alert .msg").text("پسورد باید بین 5 تا 40 کارکتر باشد").parent(".alert").removeClass("none"),t=setTimeout(function(){$("body .alert").addClass("none")},5e3),!1):passwd!=repasswd?($("body .alert .msg").text("رمز عبور و تکرار آن با هم برابر نیستند").parent(".alert").removeClass("none"),t=setTimeout(function(){$("body .alert").addClass("none")},5e3),!1):($("body .lpro").removeClass("none"),$.post(base_url+"api/chechk_reg/Passwd123/",{mobile:mobile,email:email},function(e){if(chech_user=JSON.parse(e),console.log(chech_user),"0"==chech_user.msg_code)return $("body .alert .msg").text(chech_user.msg_title).parent(".alert").removeClass("none"),$("body .lpro").addClass("none"),!1;if("1"==chech_user.msg_code){a.passwd=passwd,a.email=email,a.mobile=mobile;var t=JSON.stringify(a);localStorage.setItem("user_info_temp",t),window.location.hash="#/register_two"}}).fail(function(){$("body .lpro").addClass("none"),$("body .alert .msg").text("خطا در برقراری اتصال - مجدد تلاش نمایید").parent(".alert").removeClass("none")}),!1):($("body .alert .msg").text("ایمیل وارد شده  معتبر نمی باشد").parent(".alert").removeClass("none"),t=setTimeout(function(){$("body .alert").addClass("none")},5e3),!1))})}),$(".show_passwd").click(function(){"password"==$(this).prev("input").attr("type")?($(this).prev("input").attr("type","text"),$(this).addClass("hide_passwd")):($(this).prev("input").attr("type","password"),$(this).removeClass("hide_passwd"))})}}});